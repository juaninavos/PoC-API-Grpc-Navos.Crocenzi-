syntax = "proto3";

package alumno;

// Servicio principal para el CRUD de Alumnos
service AlumnoService {
  // Consultas (Queries)
  rpc AlumnoCount(AlumnoCountRequest) returns (AlumnoCountResponse);
  rpc FindAlumno(FindAlumnoRequest) returns (FindAlumnoResponse);
  rpc AllAlumnos(AllAlumnosRequest) returns (AllAlumnosResponse);
  
  // Mutaciones (Mutations)
  rpc AddAlumno(AddAlumnoRequest) returns (AddAlumnoResponse);
  rpc UpdateAlumno(UpdateAlumnoRequest) returns (UpdateAlumnoResponse);
  rpc DeleteAlumno(DeleteAlumnoRequest) returns (DeleteAlumnoResponse);
}

// Definición de la entidad Alumno
message Alumno {
  string id = 1;        // UUID autogenerado
  string name = 2;      // Nombre del alumno
  string lastname = 3;  // Apellido del alumno
  string mail = 4;      // Email del alumno
  string phone = 5;     // Teléfono (opcional)
  string street = 6;    // Dirección - Calle
  string city = 7;      // Dirección - Ciudad
}

// ============ REQUEST MESSAGES ============

// Consultas
message AlumnoCountRequest {}

message FindAlumnoRequest {
  string name = 1;
}

message AllAlumnosRequest {}

// Mutaciones
message AddAlumnoRequest {
  string name = 1;
  string lastname = 2;
  string mail = 3;
  string phone = 4;    // opcional
  string street = 5;
  string city = 6;
}

message UpdateAlumnoRequest {
  string id = 1;
  string name = 2;
  string lastname = 3;
  string mail = 4;
  string phone = 5;    // opcional
  string street = 6;
  string city = 7;
}

message DeleteAlumnoRequest {
  string id = 1;
}

// ============ RESPONSE MESSAGES ============

// Consultas
message AlumnoCountResponse {
  int32 count = 1;
}

message FindAlumnoResponse {
  Alumno alumno = 1;
  bool found = 2;
  string message = 3;
}

message AllAlumnosResponse {
  repeated Alumno alumnos = 1;
}

// Mutaciones
message AddAlumnoResponse {
  Alumno alumno = 1;
  bool success = 2;
  string message = 3;
}

message UpdateAlumnoResponse {
  Alumno alumno = 1;
  bool success = 2;
  string message = 3;
}

message DeleteAlumnoResponse {
  bool success = 1;
  string message = 2;
}
